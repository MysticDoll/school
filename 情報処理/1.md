# 学習目的
- 情報システムにおけるデータベースの位置づけ
- 関係データベースの基礎理論
- SQLを用いたデータベースの利用

## 教科書
- データベース実践講義 - エンジニアのためのリレーショナル理論

# 情報システムにおけるデータ
## プログラム = データ構造 + アルゴリズム の二つの観点
- アルゴリズムを実行するためのデータ構造
- データを処理するためのアルゴリズム

## 情報システム = プログラム + データ (+ 利用者 + …)
##プログラムばかりが重視されがち(特に経験が浅いとき)
- 利用者が直接操作する対象
- 開発者が直接作成する対象
- システム導入時の大きな初期コスト

-> データは後からついてくるものと見てしまう

## 情報システムは長期的に利用される
|個人|組織|社会|
|:--:|:--:|:--:|
|デスクトップ|社内システム|金融、行政|

## システム導入はプログラムの作成だけでは終わらない
- データは継続利用され、規模が拡大しづつける

## 情報システムの規模の拡大とデータ管理
### プログラムごとに個別にデータを管理
- データ構造は適切か
- データに不整合が発生しないように管理できるか
- システム障害でデータが破損しないか

### 複数のプログラムでデータを共有
- データは再利用可能になっているか
- 同時利用によりデータの一貫性に問題を生じさせないか

### 社内システム統合や合併に伴うシステム統合で既存のデータを統合
- データ構造の違いをどのように解消するか
- データ内容の違いをどのように解消するか
- プログラムとデータの組み合わせが複雑にならないか

## プログラムだけではなくデータも大切
- ソフトウェア工学
  - 開発環境
  - 開発手法
  - プロジェクト管理など
- データ工学
  - データモデル・設計
  - 汎用的なデータ管理・処理・保全など
  - 多様かつ膨大なデータの応用

### その他情報システムは総体として見るべき
プラットフォーム,UI,業務との一貫性,業務プロセス(人間系)との連携,ビジネスモデル

- データベース
  - 複数の応用目的での共有を意図して組織的かつ永続的に格納されたデータ群
- データベース管理システム(DBMS)
  - データベースを維持管理するためのソフトウェアシステム
- データベースシステム(DBS)
  - 各種アプリケーションの扱うべきデータを統合的に蓄積管理し、効率的な共有と、より高度な利用を図るためのもの

## ファイルシステムでは不十分な理由
### データとアプリケーションの相互依存による管理難
- 格納されたデータを複雑に関連付けた処理
- 複数ファイル間の一貫性確保や冗長性排除
- 格納構造と異なる構造でのデータ利用

### データの整合性維持機能の欠如
- 格納されるデータの構造や値に対する制約維持

### 不十分な機密保護
- ファイル中の一部に対するアクセス制御

### 複数ユーザの同時アクセス

- 平行した変更の無矛盾な処理

### 不十分な障害児データ保護
- データ破損の回避
- 完全に行われなかった処理の取り消し

## DBMSを利用するメリット
### データベースを構成することとは、即ち、データをアプリケーションと独立した資源として管理すること
->

- 複数アプリケーションでの多目的利用によるデータの活用が容易になる
- 関連するデータを統合し、無用な重複や不整合を防げる
- データとアプリケーションの依存関係を抑え、データの意味や相互関連を把握しやすくなる
- データの処理にDBMSの機能を用いることで、アプリケーションで実装するロジックを簡明にできる

## DBMSの主要機能
### 基盤となるデータ記述・操作系
- データモデル
- 問合わせ言語
- ビュー

### 整合性維持
- データ構造定義に付随した制約の自動チェック

### 効率の良いデータアクセス機構
- 気構造やハッシュを用いたm効率的な物理データ格納方式
- 索引や格納データの統計量の利用
- 計算・アクセスコストに基づく問合せの最適化

#### 機密保護
- ユーザ認証と操作の認可
- ビューを用いたアクセスの制限
- 細粒度アクセス制御

#### 同時実行制御
- 複数のトランザクション(分解可能な一連の処理)の適切な順序での実行を保証

#### 障害回復
- 二次記憶への書き込み制御
- データ操作のロギング
- トランザクションの安全な中断・キャンセル処理

## スキーマとインスタンス
- スキーマ(教科書では見出し)
  - データの構造 データ型 データ間の関連 各種整合性制約 などを記述したもの
  - インスタンスのメタデータ
- インスタンス(教科書では本体)
  - スキーマに基づいて格納されたデータ

# ANSI/SPARC モデル
## 抽象化レベル
- 内部レベル
  - 物理的なデータの格納のレベル
- 概念レベル
  - データベースを論理的に記述したレベル
- 外部レベル
  - 個々のアプリケーションから見たレベル

## 各レベルのスキーマの例

### 外部スキーマ
|社員番号|氏名|住所|
|:---:|:---:|:---:|
|001|筑波太郎|つくば市|
|002|土浦太郎|土浦市|
|003|水戸太郎|水戸市|

l基本給与|住所|
l:---:|:---:|
l400|つくば市|
l500|土浦市|
l450|水戸市|

### 概念スキーマ
|社員番号|氏名|基本給与|住所|
|:---:|:---:|:---:|:---:|
|001|筑波太郎|400|つくば市|
|002|土浦太郎|500|土浦市|
|003|水戸太郎|450|水戸市|


### 内部スキーマ
DBでデータを管理する方法

## 論理的データ独立性
外部スキーマに変化を及ぼさない範囲であれば概念スキーマの変更はアプリケーションと独立に可能

## 物理的データ独立性
概念スキーマに変化を及ぼさない範囲であれば内部レベルの物理的なファイル編成やデータアクセスの方法の変更はアプリケーションと独立に可能

外部スキーマ, 概念スキーマ -> 論理的データ独立性
概念スキーマ, 内部スキーマ -> 物理的データ独立性

# データベース言語
## データ定義言語(DDL, Data Definition Lang)
- スキーマの記述
## データ操作言語(DML, Data Manipulation Lang)
- インスタンスの操作
- 狭義の問合せ言語(Query Lang)
## データ制御言語(DCL, Data Control Lang)
- 機密保護指定
- トランザクション制御
## ホスト言語
- データベース言語を副言語として、プログラム中に直接記述できるプログラミング言語

# 代表的なデータモデル
## 関係データモデル(relational data model)
- 1970にCoddが提案
- 国際標準 SQL93, SQL2003

## オブジェクト指向データモデル(オブジェクトモデル)
- 国際標準 ODMG-93
- ODMG(The Object Database Management Group)
## 半構造データモデル
- XMLデータモデル
- グラフデータモデル
## その他(主にRDB以前)
- ネットワークデータモデル, 階層データモデル

# 様々なDBMS(形態別)
## クラウド型データベース
- オンラインのサービスとして提供され、汎用性やスケーラビリティ、拡張容易性、運用容易性に富む
- Microsoft SQL Azure, Amazon RDS
## クライアントサーバ型データベース
- 汎用性やスケーラビリティ、堅牢性に富む
- Oracle, Microsoft SQL Server, IBM DB2, 日立HiRDB, MySQL, PostgreSQL, Firebirdなど
## デスクトップデータベース
- 共有ファイルを使用し、利用が容易だが大規模に不向き
- サーバ側でのデータの一元管理や性能向上はできない
- Microsoft Access, FileMaker Pro, dBase, Paradox など
## 組み込みデータベース
- アプリケーションプログラムにリンクして利用するためシステムの配布・導入が容易
- データ管理を一任でき、開発が容易になる
## 組み込み機器向けデータベース
- 小型、軽量でメモリやCPUが少ない環境で利用可能
- DBMSとしての機能は基本的なものに限られる
## インメモリデータベース
- データをメモリ上で管理し、ディスクへの書き込みを極力行わない、またはディスクへの書き込みを前提としない
